<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resolve taxonomy in a Darwin Core Archive (DwCA) &mdash; Biotaphy Tutorials 1.0a1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Biotaphy Tutorials
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/glossary.html">Biotaphy Tutorial Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pages/references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="occurrence_wrangler.html">Occurrence Data Wrangler types</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Biotaphy Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Resolve taxonomy in a Darwin Core Archive (DwCA)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorial/w3_split_occurrence_data.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="resolve-taxonomy-in-a-darwin-core-archive-dwca">
<h1>Resolve taxonomy in a Darwin Core Archive (DwCA)<a class="headerlink" href="#resolve-taxonomy-in-a-darwin-core-archive-dwca" title="Permalink to this headline"></a></h1>
<p><strong>Webinar 3</strong>, <a class="reference external" href="https://docs.google.com/document/d/1CqYkCUlY40p8NnqM-GtcLju70jrAG45FGejJ26sS3_U/edit#heading=h.eax09dyp58l1">Big Data Munging</a>
(Module 2, Big-Data approaches)</p>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline"></a></h2>
<p>Read <a class="reference internal" href="w1_overview.html"><span class="doc std std-doc">Tutorial Overview</span></a> for an overview of how all tutorials work.</p>
</section>
<section id="data-preparation">
<h2>Data Preparation<a class="headerlink" href="#data-preparation" title="Permalink to this headline"></a></h2>
<section id="input-occurrence-data">
<h3>Input occurrence data<a class="headerlink" href="#input-occurrence-data" title="Permalink to this headline"></a></h3>
<p>The split_occurrence_data tool accepts either a Darwin Core Archive (DwCA) file or a
CSV file containing records for one or more taxa.</p>
<ol class="arabic simple">
<li><p>The tutorial example DwCA is at <span class="xref myst">occ_sax_gbif.zip</span></p></li>
<li><p>To download from GBIF, choose your filters in the portal
https://www.gbif.org/occurrence.  For example, to select occurrences where
genus=<code class="docutils literal notranslate"><span class="pre">Heuchera</span> <span class="pre">L</span></code>,
https://www.gbif.org/occurrence/search?taxon_key=3032645&amp;occurrence_status=present.
Then choose the download link at the upper right column header.</p></li>
<li><p>To download from iDigBio, instructions for querying and downloading from the
command prompt are at <a class="reference internal" href="idigbio_download.html"><span class="doc std std-doc">idigbio_download.md</span></a>.</p></li>
</ol>
</section>
<section id="tool-configuration-file">
<h3>Tool Configuration file<a class="headerlink" href="#tool-configuration-file" title="Permalink to this headline"></a></h3>
<p><span class="xref myst">here</span></p>
<ul class="simple">
<li><p><strong>max_open_writers</strong>: The maximum number of data writers to have open at once.</p></li>
<li><p><strong>key_field</strong>: The field name (or names) to use for filenames.  This/these must be
encased in square brackets, i.e. <code class="docutils literal notranslate"><span class="pre">&quot;key_field&quot;:</span> <span class="pre">[&quot;scientificName&quot;]</span></code>. If multiple fields
are provided, the ordered fields specify the sub-directory structure used for
organizing files.  The first field will specify the directory directly under
out_dir, and so on.  The final field will be contain the base filename.  These
fields should be hierarchical.  For example, if grouping records into files by
species, with a dataset containing 2000 species, using taxonomic grouping fields
(in order from coarser to finer groups)
such as <code class="docutils literal notranslate"><span class="pre">&quot;key_field&quot;:</span> <span class="pre">[&quot;family&quot;,</span> <span class="pre">&quot;genus&quot;,</span> <span class="pre">&quot;species&quot;]</span></code> would create a file
with records for the Giant Panda in
“&lt;out_dir&gt;/Ursidae/Ailuropoda/Ailuropoda melanoleuca.csv”.<br />
If this parameter is not specified, it will default to the fieldname for grouping
data.  This is a required argument for CSV files and defaults to “scientificName”
in DwCA files.  If there are more groups/files than are allowed in a directory, the<br />
files will be written to subdirectories by the beginning characters in the species
name.</p></li>
<li><p><strong>out_field</strong>: The field name or names of columns to be included in output CSV files.
If this field is left out, all fields from the first successfully processed record
will be included in outputs.</p></li>
<li><p><strong>dwca</strong>: List of 0 or more lists, each containing 2 arguments</p>
<ul>
<li><p>input DwCA file, and</p></li>
<li><p>occurrence data wrangler configuration file (described in the next section). The
example split_occurrence_data wrangler configuration used for this tutorial step
is <span class="xref myst">here</span></p></li>
</ul>
</li>
<li><p><strong>csv</strong>:  List of 0 or more lists, each containing 5 arguments</p>
<ul>
<li><p>input CSV file</p></li>
<li><p>occurrence data wrangler configuration file (described in the next section).</p></li>
<li><p>fieldname for grouping data (often a taxonomic designation such as scientificName)</p></li>
<li><p>fieldname for the longitude/x coordinate</p></li>
<li><p>fieldname for the latitude/y coordinate</p></li>
</ul>
</li>
</ul>
</section>
<section id="occurrence-data-wranglers">
<h3>Occurrence Data Wranglers<a class="headerlink" href="#occurrence-data-wranglers" title="Permalink to this headline"></a></h3>
<p>An example split_occurrence_data wrangler configuration used for this tutorial step is
<span class="xref myst">here</span></p>
<p>The split_occurrence_data configuration file consists of one or more “wrangler_type”s,
and= the wrangler-specific required and possibly optional parameters for each.<br />
Available wrangler_types with their parameters are listed at
<a class="reference internal" href="occurrence_wrangler.html"><span class="doc std std-doc">Occurrence Data Wrangler Types</span></a></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
</section>
<section id="run-split-occurrence-data-tutorial">
<h2>Run split_occurrence_data tutorial<a class="headerlink" href="#run-split-occurrence-data-tutorial" title="Permalink to this headline"></a></h2>
<p>Initiate the clean occurrences process with the following:</p>
<p>for linux/mac systems</p>
<div class="highlight-zsh notranslate"><div class="highlight"><pre><span></span>./run_tutorial.sh split_occurrence_data data/config/split_occurrence_data.json
</pre></div>
</div>
<p>for windows systems</p>
<div class="highlight-cmd notranslate"><div class="highlight"><pre><span></span>run_tutorial.bat split_occurrence_data data\config\split_occurrence_data.json
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Biotaphy Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>